---
slug: "am-I-using-useeffect-well"
title: "나는 useEffect를 잘 사용하고있나?"
description: "모던 React-deep-dive를 읽으면서 내 코드 돌아보기"
ogImage: "/post-asset/am-I-using-useeffect-well/main-og.webp"
type: "tech"
date: "2024-09-05"
readingLength: "15"
tags:
  - CAREER
---

#### 이 글의 내용은 모던 리액트 딥다이브 책을 읽고 생각을 정리한 것이다.

## useEffect

useEffect의 정의를 물어보면 대부분의 사람들은 이렇게 대답한다고 한다.

1. useEffect는 두개의 인수를 받고, 첫 번째는 콜백, 두 번째는 의존성 배열을 받는다. 이 의존성 배열의 값이 변경되면 첫 번째 인수인 콜백을 실행한다.

2. 클래스형 컴포넌트의 생명주기 메서드와 비슷한 작동을 구현 할 수 있다.

3. 클린업 관련된 내용이지만 생략

<br />

저자가 내린 useEffect의 정의는

> 어플리케이션 내 컴포넌트의 여러값들을 활용해 동기적으로 부수 효과를 만드는 매커니즘.

그리고

> 이 부수 효과가 '언제' 일어나는지보다 어떤 상태값과 함께 실행되는지 살펴보는 것이 중요하다.

<br />
<br />

이 내용만으로도 역시 나는 정확한 핵심 개념을 가지고 개발을 한건 아니였구나라는 생각이 들었다.

정의와 함께 저자가 전하려는 주의사항인 **'언제'** 보다 **'어떤 상태값'**에 가장 크게 깨달음을 얻었는데,

구현을 하면서 나는 지금까지

> '**언제'** 이 함수를 실행해야 할까,

> 상태가 바뀌는 **'때'**에 로직을 실행해야해.

라는 생각에 사로잡혀 useEffect를 사용했었다.

## useEffect 사용시에 주의해야하는 이유

useEffect는 반드시 의존성 배열로 전달한 값의 변경에 의해 실행되어야만 하는 훅이다. 그러니 적절한 값을

의존성 배열에 전달하지 않고 값을 사용한다면, 실제 값의 상태와 useEffect가 일으키는 부수 효과가

함께 움직여야 한다는 useEffect 훅의 사용 이유와 정 반대로인, 별개의 상태처럼 동작 해버리는 경우가 생길 수 있다고 한다.

= 언제든 예기치 못한 동작이 되는, 버그로 번질 수 있는 시한폭탄인 것

## 빈 배열도 다시보기

의존성 배열에 빈 배열을 넘겨주는 즉, 컴포넌트가 마운트되는 시점에만 실행을 하려는 코드도 마찬가지로

원치 않는 부수 효과를 일으킬 수 있는 시한폭탄이다.

정말로 내가 원하는 부수 효과가 값의 상태와 별개로 작동 해야만 하는지, 호출 위치가 적절한 것인지 계속 고민해 봐야한다.

## useEffect 이름을 참 잘 지은거 같기도

여기서 부터는 주저리인데

개발하면서 변수명을 생성하여 할당하고, 잘 지어야 하는 이유는 이름만 보고 값이나 상태,

함수의 경우 동작과 반환 값을 유추 해볼 수 있기에 항상 잘 지으려고 하고, 애매한 이름에는 분노 하는 이유이기 때문이다.

하지만 프로젝트, 회사 컨벤션을 넘어선 라이브러리와 프레임워크의 내부 컨셉의 이름까지 잘 짓는다면 더 이해하기 쉽고,

배우는 입장에서 러닝 커브가 아주 조금이라도 줄어들지 않을까 싶고, 개인적으로 그런 부분이 감동 포인트기도 하다.

부수 효과를 관리하기에 항상 조심하고 또 조심하면서 작성 해야하는 훅이기에 내가 이 훅의 이름을 짓는다면

use시한폭탄Effect 정도로 지었을꺼 같긴한데 그래도 컨셉과 어떤식으로 useEffect를 도입하고 구현 해야하는지

알게 된후에는 아 이래서 useEffect구나 이름 참 잘지었다 하고 쪼끔 감동했다.

앞으로 useEffect를 사용하면서 항상 시한폭탄을 다룬다는 생각으로 조심조심 사용을 해보려고 한다.
